{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/timeline/DatePager.vue?4fca","webpack:///./src/views/timeline/TheTimeline.vue?30ef","webpack:///./src/views/timeline/FlightTooltip.vue?04c9","webpack:///./src/views/Setup.vue?05e4","webpack:///./src/views/stories/TheStories.vue?6ac8","webpack:///./src/views/stories/TheStories.vue?ac98","webpack:///./src/components/LegendItem.vue?35a5","webpack:///./src/App.vue?c63b","webpack:///./src/views/timeline/Timeline.vue?6897","webpack:///./src/views/stories/Leaflet.vue?3999","webpack:///./src/App.vue?e192","webpack:///./src/App.vue","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/views/timeline/TheTimeline.vue","webpack:///./src/views/timeline/index.ts","webpack:///./src/views/timeline/Leaflet.vue","webpack:///./src/shared/LeafletConfig.ts","webpack:///./src/components/LegendItem.vue","webpack:///./src/components/LegendItem.vue?4fc8","webpack:///./src/components/LegendItem.vue?f6cf","webpack:///./src/views/timeline/Leaflet.vue?569d","webpack:///./src/views/timeline/Leaflet.vue?e18b","webpack:///./src/views/timeline/Timeline.vue","webpack:///./src/views/timeline/DatePager.vue","webpack:///./src/views/timeline/DatePager.vue?5ca6","webpack:///./src/views/timeline/DatePager.vue?8955","webpack:///./src/views/timeline/FlightTooltip.vue","webpack:///./src/views/timeline/FlightTooltip.vue?24ae","webpack:///./src/views/timeline/FlightTooltip.vue?0d4f","webpack:///./src/views/timeline/Timeline.vue?c079","webpack:///./src/views/timeline/Timeline.vue?5673","webpack:///./src/views/timeline/TheTimeline.vue?b060","webpack:///./src/views/timeline/TheTimeline.vue?7cb2","webpack:///./src/views/Setup.vue","webpack:///./src/shared/DataService.ts","webpack:///./src/views/Setup.vue?1f61","webpack:///./src/views/Setup.vue?1a6e","webpack:///./src/views/stories/TheStories.vue","webpack:///./src/views/stories/Leaflet.vue","webpack:///./src/views/stories/Tooltip.vue","webpack:///./src/views/stories/Tooltip.vue?19fb","webpack:///./src/views/stories/Tooltip.vue?2e14","webpack:///./src/views/stories/Leaflet.vue?5711","webpack:///./src/views/stories/Leaflet.vue?079e","webpack:///./src/views/stories/TheStories.vue?9063","webpack:///./src/views/stories/TheStories.vue?e5f4","webpack:///./src/store/types.ts","webpack:///./src/store/index.ts","webpack:///./src/router/index.ts","webpack:///./src/main.ts","webpack:///./src/views/timeline/Timeline.vue?5cb2","webpack:///./src/views/timeline/Leaflet.vue?b772"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","to","render","__scopeId","class","events","tooltipContent","highlightFlight","dateRangeChanged","selectedLineId","selectedFlightId","fields","this","id","legendItems","item","label","color","attribution","description","lineStyle","weight","lineStyleHighlighted","tileLayer","zoneStyle","type","stroke","initialCenter","initialZoom","style","placement","content","components","ElTooltip","props","String","LegendItem","map","undefined","Map","selectedLine","computed","methods","watch","remove","line","toGeoJSON","addLayer","fitBounds","getBounds","pad","flights","features","flight","has","set","keys","flightId","existingFlight","find","delete","zones","filter","z","properties","zone","mounted","renderer","zoomControl","attributionControl","setView","getZones","beforeUnmount","ref","setDateRange","$event","title","duration","size","disabled","enabled","previous","formattedDate","next","ElRadioGroup","ElRadioButton","emits","selectedDate","Date","Boolean","default","dateRange","$emit","format","toString","startOf","toDate","endOf","subtract","add","field","DateRange","FlightTooltip","minDate","maxDate","Array","daysInDomain","diff","maxZoomFactor","minDisplayedDays","labels","keyLabels","e","debounceDateRangeChanged","from","zoomBehavior","zoomRect","margin","top","right","bottom","left","xScale","zoomScale","yScale","xAxisDefinition","xAxis","tracksSelection","defaultSelection","svg","eventsSelection","clipRect","resizeObserver","ResizeObserver","entries","onResize","resetZoom","transform","range","domain","scale","scalesChanged","domainMin","domainMax","zoom","event","rescaleX","forEach","entry","outerSize","height","contentRect","width","innerSize","Math","max","attr","extent","paddingBottom","rangeRound","bandwidth","y","xEnd","end","xStart","start","join","enter","append","on","classed","_","update","exit","selectAll","g","text","sort","created","padding","scaleExtent","observe","$refs","getFlights","flightEnd","flightStart","totalMinutes","totalHours","floor","minutes","aircraft","f","LeafletMap","Leaflet","Timeline","xmlns","viewBox","stroke-width","fill","stroke-linecap","stroke-linejoin","x1","y1","x2","y2","points","href","loadData","target","files","isLoading","status","db","addGeoJSON","featureCollection","bulkDocs","createIndex","index","selector","$or","found","docs","$gte","$lte","getFlightsByIds","ids","$in","dataExists","info","doc_count","a","response","plugin","zip","arrayBuffer","buffer","unzipped","filePath","file","async","geoJSON","JSON","parse","console","error","$router","infoText","tooltipContents","aircraftName","formatDate","date","dayjsFormat","Tooltip","keyboard","dragging","scrollWheelZoom","doubleClickZoom","InfoMap","getInfoText","buttons","document","getElementsByClassName","button","flightIds","getAttribute","split","addEventListener","CHECK_IF_DATA_EXSISTS","GET_FLIGHTS","GET_INFO_TEXT","GET_ZONES","store","state","mutations","actions","commit","flightInfos","payload","checkIfDataExists","routes","path","component","Setup","alias","TheTimeline","meta","requireData","TheStories","router","history","beforeEach","dispatch","matched","some","record","plugins","app","App","use","mount"],"mappings":"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","file":"js/app.97b3ac50.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DatePager.vue?vue&type=style&index=0&id=32d1ccce&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TheTimeline.vue?vue&type=style&index=0&id=3050e800&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./FlightTooltip.vue?vue&type=style&index=0&id=73929900&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Setup.vue?vue&type=style&index=0&id=336f499a&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TheStories.vue?vue&type=style&index=0&id=9e6b951c&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TheStories.vue?vue&type=style&index=1&id=9e6b951c&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LegendItem.vue?vue&type=style&index=0&id=2b39f5f8&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=1&id=1ca26644&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Timeline.vue?vue&type=style&index=0&id=48e5e73c&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Leaflet.vue?vue&type=style&index=0&id=41d95c29&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=1ca26644&lang=scss\"","<template>\n  <nav>\n    <router-link to=\"/\">TIMELINE</router-link>\n    <router-link to=\"/stories\">STORIES</router-link>\n  </nav>\n  <main>\n    <router-view />\n  </main>\n  <footer>\n    <p>\n      MAP TILES: &copy;\n      <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>\n      contributors &copy;\n      <a href=\"https://carto.com/attributions\">CARTO</a>\n    </p>\n    <p>\n      WEBSITE: © <a href=\"https://schnerring.net\">Michael Schnerring</a>,\n      Sebastian Deuss |\n      <a href=\"https://github.com/schnerring/seabats/blob/main/LICENSE\">MIT</a>\n      |\n      <a href=\"https://github.com/schnerring/seabats\">GitHub</a>\n    </p>\n    <p>\n      DESIGN &amp; CONTENT © Giovanna |\n      <a rel=\"license\" href=\"https://creativecommons.org/licenses/by/4.0\"\n        >CC BY 4.0</a\n      >\n    </p>\n  </footer>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({});\n</script>\n\n<style lang=\"scss\">\nhtml,\nbody {\n  margin: 0;\n  padding: 0;\n  font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\",\n    \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\n}\n:root {\n  /* Material Blue */\n  --blue: #1148fe;\n  --grey: #e9e9e9;\n  --grey2: #acacac;\n  --grey3: #707070;\n  --white: #ffffff;\n  --black: #818181;\n}\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  display: grid;\n  grid-template-areas:\n    \"nav\"\n    \"main\";\n  grid-template-rows: auto 1fr;\n  height: 100vh;\n}\n\n::-webkit-scrollbar {\n  height: 5px;\n  width: 5px;\n  scrollbar-width: auto;\n}\n::-webkit-scrollbar-thumb {\n  background: #262626;\n}\n\na {\n  color: var(--blue);\n}\n</style>\n\n<style lang=\"scss\" scoped>\nnav {\n  border-bottom: var(--grey2) solid 1px;\n  display: flex;\n  font-size: 16pt;\n  grid-area: nav;\n  justify-content: space-between;\n  padding: 5px;\n\n  a {\n    color: var(--black);\n    font-weight: bold;\n    text-decoration: none;\n\n    &.router-link-exact-active {\n      color: var(--blue);\n    }\n  }\n}\n\nmain {\n  grid-area: main;\n  overflow: hidden;\n}\n\nfooter {\n  text-align: right;\n  position: absolute;\n  bottom: 0;\n  right: 10px;\n  font-size: 11px;\n  text-rendering: optimizeLegibility;\n  color: var(--grey3);\n  grid-area: footer;\n  text-align: right;\n  z-index: 500;\n  background: transparent;\n}\nfooter a {\n  color: inherit;\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({});\n","import { render } from \"./App.vue?vue&type=template&id=1ca26644&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1ca26644&lang=scss\"\nimport \"./App.vue?vue&type=style&index=1&id=1ca26644&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1ca26644\"\n\nexport default script","<template>\n  <div class=\"parent\">\n    <div class=\"timeline\">\n      <timeline\n        :events=\"events\"\n        :tooltipContent=\"tooltipContent\"\n        @event-click=\"highlightFlight\"\n        @date-range-changed=\"dateRangeChanged\"\n      />\n    </div>\n    <div class=\"map\">\n      <leaflet-map :selectedLineId=\"selectedFlightId\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport dayjs from \"dayjs\";\nimport { defineComponent } from \"vue\";\nimport { mapState, mapActions } from \"vuex\";\nimport { Feature, LineString } from \"geojson\";\n\nimport { TooltipContent, IEvent } from \".\";\nimport LeafletMap from \"./Leaflet.vue\";\nimport Timeline from \"./Timeline.vue\";\n\nimport { Flight } from \"@/models/Flight\";\n\nexport default defineComponent({\n  data(): {\n    events: IEvent<Flight>[];\n    tooltipContent: TooltipContent | undefined;\n    selectedFlightId: string | undefined;\n  } {\n    return {\n      events: [],\n      tooltipContent: undefined,\n      selectedFlightId: undefined,\n    };\n  },\n  methods: {\n    async dateRangeChanged(from: Date, to: Date) {\n      await this.getFlights({ from, to });\n    },\n    highlightFlight(event: IEvent<Flight>) {\n      this.selectedFlightId = event.key;\n      const flightEnd = event.data.to;\n      const flightStart = event.data.from;\n      const totalMinutes = dayjs(flightEnd).diff(flightStart, \"minutes\");\n      const totalHours = Math.floor(totalMinutes / 60);\n      const minutes = totalMinutes % 60;\n      this.tooltipContent = new TooltipContent([\n        {\n          key: \"DATE\",\n          value: dayjs(event.data.from).format(\"YYYY-MM-DD\"),\n        },\n        {\n          key: \"TIME\",\n          value: dayjs(event.data.from).format(\"HH:mm\"),\n        },\n        {\n          key: \"DURATION\",\n          value: `${totalHours.toString()}h ${minutes}m`,\n        },\n        {\n          key: \"TYPE\",\n          value: event.data.aircraft,\n        },\n      ]);\n    },\n    ...mapActions([\"getFlights\"]),\n  },\n  computed: {\n    ...mapState([\"flights\"]),\n  },\n  watch: {\n    async flights(flights: Feature<LineString, Flight>[]) {\n      this.events = flights.map((f) => {\n        return {\n          data: f.properties,\n          label: f.properties.aircraft,\n          key: f.id as string,\n          start: dayjs(f.properties.from).toDate(),\n          end: dayjs(f.properties.to).toDate(),\n        };\n      });\n    },\n  },\n  components: {\n    LeafletMap,\n    Timeline,\n  },\n});\n</script>\n\n<style scoped>\n.parent {\n  display: grid;\n  grid-template-areas:\n    \"timeline\"\n    \"map\";\n  grid-template-rows: auto 1fr;\n}\n.parent,\n.map {\n  height: 100%;\n}\n.timeline {\n  height: 240px;\n  width: 100%;\n  grid-area: timeline;\n}\n.map {\n  grid-area: map;\n}\n</style>\n","export interface ITimeline {\n  min: Date;\n  max: Date;\n  tracks: IEventBase[];\n}\n\nexport interface IEventBase {\n  key: string;\n  label: string;\n  start: Date;\n  end: Date;\n}\n\nexport interface IEvent<T> extends IEventBase {\n  data: T;\n}\n\nexport class TooltipContent {\n  fields: { key: string; value: string }[];\n  constructor(fields: { key: string; value: string }[]) {\n    this.fields = fields;\n  }\n}\n","<template>\n  <div id=\"leaflet\"></div>\n  <div class=\"legend\">\n    <legend-item\n      v-for=\"item of legendItems\"\n      :key=\"item.label\"\n      :color=\"item.color\"\n      :label=\"item.label\"\n      :attribution=\"item.attribution\"\n      :description=\"item.description\"\n    ></legend-item>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { mapActions, mapState } from \"vuex\";\nimport {\n  Map as LeafletMap,\n  geoJSON,\n  GeoJSON,\n  Canvas,\n  FeatureGroup,\n} from \"leaflet\";\nimport { Feature } from \"geojson\";\n\nimport {\n  lineStyle,\n  lineStyleHighlighted,\n  initialCenter,\n  initialZoom,\n  tileLayer,\n  zoneStyle,\n} from \"@/shared/LeafletConfig\";\nimport LegendItem from \"@/components/LegendItem.vue\";\n\nexport default defineComponent({\n  components: {\n    LegendItem,\n  },\n  data(): {\n    map: LeafletMap | undefined;\n    data: Map<string, GeoJSON>;\n    selectedLine: GeoJSON | undefined;\n    legendItems: {\n      color: string;\n      label: string;\n      attribution: string;\n      description: string;\n    }[];\n  } {\n    return {\n      map: undefined,\n      data: new Map(),\n      selectedLine: undefined,\n      legendItems: [],\n    };\n  },\n  props: {\n    selectedLineId: {\n      type: String,\n    },\n  },\n  computed: {\n    ...mapState([\"flights\", \"zones\"]),\n  },\n  methods: {\n    ...mapActions([\"getZones\"]),\n  },\n  watch: {\n    selectedLineId() {\n      this.selectedLine?.remove();\n      this.selectedLine = undefined;\n\n      if (this.selectedLineId) {\n        const line = this.data.get(this.selectedLineId);\n        if (line) {\n          const selectedLine = geoJSON(line.toGeoJSON(), {\n            style: lineStyleHighlighted,\n          });\n          this.map?.addLayer(selectedLine);\n          this.map?.fitBounds(selectedLine.getBounds().pad(0.2));\n          this.selectedLine = selectedLine;\n        }\n      }\n    },\n    flights(flights: Feature[]) {\n      const features = new FeatureGroup();\n      for (const flight of flights) {\n        if (typeof flight.id !== \"string\") throw \"Flights require valid ID\";\n\n        if (this.data.has(flight.id)) {\n          continue;\n        }\n        const data = geoJSON(flight, {\n          style: lineStyle,\n        });\n        // Add the lines to the Typescript map\n        this.data.set(flight.id, data);\n        // Render the line in Leaflet\n        features.addLayer(data); // TODO bringToFront()\n      }\n      this.map?.addLayer(features);\n\n      for (const flightId of this.data.keys()) {\n        const existingFlight = flights.find((flight) => flight.id === flightId);\n        if (existingFlight) {\n          continue;\n        }\n        // Un-render the line from Leaflet\n        this.data.get(flightId)?.remove();\n        // remove the line from the Typescript Map\n        this.data.delete(flightId);\n      }\n    },\n    zones(zones: Feature[]) {\n      // TODO fix code duplication\n      this.legendItems = zones\n        .filter((z) => z.properties?.type === \"sar\")\n        .map((z) => {\n          return {\n            color: z.properties?.color,\n            label: z.properties?.label,\n            attribution: z.properties?.attribution,\n            description: z.properties?.description,\n          };\n        });\n      for (const zone of zones) {\n        this.map?.addLayer(\n          geoJSON(zone, {\n            style: zoneStyle(zone.properties?.type, zone.properties?.color),\n          }) // TODO bringToBack()\n        );\n      }\n    },\n  },\n  async mounted() {\n    this.map = new LeafletMap(\"leaflet\", {\n      renderer: new Canvas(),\n      zoomControl: false,\n      attributionControl: false,\n    });\n\n    this.map.setView(initialCenter, initialZoom);\n\n    this.map.addLayer(tileLayer());\n\n    await this.getZones();\n  },\n  beforeUnmount() {\n    this.map?.remove();\n  },\n});\n</script>\n\n<style scoped>\n#leaflet {\n  height: inherit;\n  z-index: inherit;\n}\n.legend {\n  bottom: 15px;\n  color: var(--white);\n  position: absolute;\n  left: 15px;\n  z-index: 500;\n}\n</style>\n","import { LatLng, TileLayer } from \"leaflet\";\n\nexport const lineStyle = {\n  color: \"#ffffff\", // var(--white)\n  weight: 1,\n};\n\nexport const lineStyleHighlighted = {\n  color: \"#1148fe\", // var(--blue)\n  weight: 3,\n};\n\nexport function tileLayer(): TileLayer {\n  return new TileLayer(\n    \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\n  );\n}\n\nexport function zoneStyle(\n  type: string,\n  color: string\n): { weight: number; color: string; stroke: boolean } {\n  return {\n    weight: type === \"sar\" ? 2 : 1,\n    color: color,\n    stroke: false,\n  };\n}\n\nexport const initialCenter = new LatLng(35.917973, 14.409943);\n\nexport const initialZoom = 6;\n","<template>\n  <div class=\"legend-item\">\n    <div class=\"legend-symbol\" :style=\"{ background: color }\"></div>\n    <el-tooltip placement=\"right\">\n      <template #content>{{ attribution }}<br />{{ description }}</template>\n      <div class=\"legend-text\">\n        <span>{{ label }}</span>\n      </div>\n    </el-tooltip>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { ElTooltip } from \"element-plus\";\n\nexport default defineComponent({\n  components: {\n    ElTooltip,\n  },\n  props: {\n    color: { type: String },\n    label: { type: String },\n    attribution: { type: String },\n    description: { type: String },\n  },\n});\n</script>\n\n<style scoped>\n.legend-item {\n  align-items: center;\n  display: flex;\n  font-family: monospace;\n  padding: 0.2rem 0;\n}\n.legend-symbol {\n  width: 0.5rem;\n  height: 0.5rem;\n}\n.legend-text {\n  margin-left: 0.5rem;\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\nimport { ElTooltip } from \"element-plus\";\n\nexport default defineComponent({\n  components: {\n    ElTooltip,\n  },\n  props: {\n    color: { type: String },\n    label: { type: String },\n    attribution: { type: String },\n    description: { type: String },\n  },\n});\n","import { render } from \"./LegendItem.vue?vue&type=template&id=2b39f5f8&scoped=true\"\nimport script from \"./LegendItem.vue?vue&type=script&lang=ts\"\nexport * from \"./LegendItem.vue?vue&type=script&lang=ts\"\n\nimport \"./LegendItem.vue?vue&type=style&index=0&id=2b39f5f8&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-2b39f5f8\"\n\nexport default script","\nimport { defineComponent } from \"vue\";\nimport { mapActions, mapState } from \"vuex\";\nimport {\n  Map as LeafletMap,\n  geoJSON,\n  GeoJSON,\n  Canvas,\n  FeatureGroup,\n} from \"leaflet\";\nimport { Feature } from \"geojson\";\n\nimport {\n  lineStyle,\n  lineStyleHighlighted,\n  initialCenter,\n  initialZoom,\n  tileLayer,\n  zoneStyle,\n} from \"@/shared/LeafletConfig\";\nimport LegendItem from \"@/components/LegendItem.vue\";\n\nexport default defineComponent({\n  components: {\n    LegendItem,\n  },\n  data(): {\n    map: LeafletMap | undefined;\n    data: Map<string, GeoJSON>;\n    selectedLine: GeoJSON | undefined;\n    legendItems: {\n      color: string;\n      label: string;\n      attribution: string;\n      description: string;\n    }[];\n  } {\n    return {\n      map: undefined,\n      data: new Map(),\n      selectedLine: undefined,\n      legendItems: [],\n    };\n  },\n  props: {\n    selectedLineId: {\n      type: String,\n    },\n  },\n  computed: {\n    ...mapState([\"flights\", \"zones\"]),\n  },\n  methods: {\n    ...mapActions([\"getZones\"]),\n  },\n  watch: {\n    selectedLineId() {\n      this.selectedLine?.remove();\n      this.selectedLine = undefined;\n\n      if (this.selectedLineId) {\n        const line = this.data.get(this.selectedLineId);\n        if (line) {\n          const selectedLine = geoJSON(line.toGeoJSON(), {\n            style: lineStyleHighlighted,\n          });\n          this.map?.addLayer(selectedLine);\n          this.map?.fitBounds(selectedLine.getBounds().pad(0.2));\n          this.selectedLine = selectedLine;\n        }\n      }\n    },\n    flights(flights: Feature[]) {\n      const features = new FeatureGroup();\n      for (const flight of flights) {\n        if (typeof flight.id !== \"string\") throw \"Flights require valid ID\";\n\n        if (this.data.has(flight.id)) {\n          continue;\n        }\n        const data = geoJSON(flight, {\n          style: lineStyle,\n        });\n        // Add the lines to the Typescript map\n        this.data.set(flight.id, data);\n        // Render the line in Leaflet\n        features.addLayer(data); // TODO bringToFront()\n      }\n      this.map?.addLayer(features);\n\n      for (const flightId of this.data.keys()) {\n        const existingFlight = flights.find((flight) => flight.id === flightId);\n        if (existingFlight) {\n          continue;\n        }\n        // Un-render the line from Leaflet\n        this.data.get(flightId)?.remove();\n        // remove the line from the Typescript Map\n        this.data.delete(flightId);\n      }\n    },\n    zones(zones: Feature[]) {\n      // TODO fix code duplication\n      this.legendItems = zones\n        .filter((z) => z.properties?.type === \"sar\")\n        .map((z) => {\n          return {\n            color: z.properties?.color,\n            label: z.properties?.label,\n            attribution: z.properties?.attribution,\n            description: z.properties?.description,\n          };\n        });\n      for (const zone of zones) {\n        this.map?.addLayer(\n          geoJSON(zone, {\n            style: zoneStyle(zone.properties?.type, zone.properties?.color),\n          }) // TODO bringToBack()\n        );\n      }\n    },\n  },\n  async mounted() {\n    this.map = new LeafletMap(\"leaflet\", {\n      renderer: new Canvas(),\n      zoomControl: false,\n      attributionControl: false,\n    });\n\n    this.map.setView(initialCenter, initialZoom);\n\n    this.map.addLayer(tileLayer());\n\n    await this.getZones();\n  },\n  beforeUnmount() {\n    this.map?.remove();\n  },\n});\n","import { render } from \"./Leaflet.vue?vue&type=template&id=208051ef&scoped=true\"\nimport script from \"./Leaflet.vue?vue&type=script&lang=ts\"\nexport * from \"./Leaflet.vue?vue&type=script&lang=ts\"\n\nimport \"./Leaflet.vue?vue&type=style&index=0&id=208051ef&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-208051ef\"\n\nexport default script","<template>\n  <div class=\"timeline\">\n    <div class=\"d3\" ref=\"d3\"></div>\n    <div class=\"info-bar\">\n      <date-range @dateRangeChanged=\"setDateRange($event)\" />\n      <div class=\"event-info\"></div>\n      <div class=\"event-info\" v-if=\"tooltipContent\" :key=\"tooltipContent.title\">\n        <flight-tooltip :content=\"tooltipContent\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport DateRange from \"./DatePager.vue\";\nimport { defineComponent } from \"vue\";\nimport dayjs from \"dayjs\";\nimport { debounce, uniq } from \"lodash\";\nimport { IEventBase } from \".\";\n\nimport {\n  scaleTime,\n  zoom,\n  axisBottom,\n  select,\n  selectAll,\n  Axis,\n  NumberValue,\n  ScaleBand,\n  scaleBand,\n  Selection,\n  ScaleTime,\n  BaseType,\n  ZoomBehavior,\n  D3ZoomEvent,\n  zoomIdentity,\n} from \"d3\";\n\nimport { TooltipContent } from \".\";\nimport FlightTooltip from \"./FlightTooltip.vue\";\n\nexport default defineComponent({\n  emits: [\"eventClick\", \"dateRangeChanged\"],\n  components: {\n    DateRange,\n    FlightTooltip,\n  },\n  props: {\n    minDate: {\n      type: Date,\n      default: new Date(2021, 0, 1),\n    },\n    maxDate: {\n      type: Date,\n      default: new Date(2021, 11, 31),\n    },\n    events: {\n      type: Array as () => IEventBase[],\n      default: [] as IEventBase[],\n    },\n    tooltipContent: {\n      type: TooltipContent,\n      default: undefined,\n    },\n  },\n  computed: {\n    daysInDomain(): number {\n      return dayjs(this.maxDate).diff(dayjs(this.minDate), \"days\", true);\n    },\n    maxZoomFactor(): number {\n      const minDisplayedDays = 4;\n      return this.daysInDomain / minDisplayedDays;\n    },\n    labels(): string[] {\n      const keyLabels = this.events.map((e) => e.label);\n      return uniq(keyLabels);\n    },\n  },\n  data() {\n    return {\n      debounceDateRangeChanged: debounce((from: Date, to: Date) => {\n        this.$emit(\"dateRangeChanged\", from, to);\n      }, 1000),\n      zoomBehavior: {} as ZoomBehavior<SVGRectElement, unknown>,\n      zoomRect: {} as Selection<SVGRectElement, unknown, HTMLElement, unknown>,\n      margin: { top: 10, right: 30, bottom: 10, left: 150 },\n      xScale: {} as ScaleTime<number, number, never>,\n      zoomScale: {} as ScaleTime<number, number, never>,\n      yScale: {} as ScaleBand<string>,\n      xAxisDefinition: {} as Axis<Date | NumberValue>,\n      xAxis: {} as Selection<SVGGElement, unknown, HTMLElement, unknown>,\n      tracksSelection: {} as Selection<BaseType, string, SVGGElement, unknown>,\n      defaultSelection: [] as number[],\n      svg: {} as Selection<SVGSVGElement, unknown, HTMLElement, unknown>,\n      eventsSelection: {} as Selection<\n        SVGRectElement,\n        IEventBase,\n        SVGGElement,\n        unknown\n      >,\n      clipRect: {} as Selection<SVGRectElement, unknown, HTMLElement, unknown>,\n      resizeObserver: new ResizeObserver(\n        debounce((entries) => {\n          this.onResize(entries);\n        }, 250)\n      ),\n    };\n  },\n  methods: {\n    resetZoom() {\n      this.zoomBehavior.transform(this.zoomRect, zoomIdentity);\n    },\n    setDateRange(range: [Date, Date]) {\n      const from = range[0];\n      const to = range[1];\n\n      this.zoomScale = this.zoomScale.domain([from, to]);\n      this.xAxisDefinition.scale(this.zoomScale);\n      this.scalesChanged();\n\n      const domainMin = this.zoomScale.domain()[0];\n      const domainMax = this.zoomScale.domain()[1];\n      this.debounceDateRangeChanged(domainMin, domainMax);\n    },\n    zoom(event: D3ZoomEvent<SVGRectElement, unknown>) {\n      this.zoomScale = event.transform.rescaleX(this.xScale);\n      this.xAxisDefinition.scale(this.zoomScale);\n      this.scalesChanged();\n\n      const domainMin = this.zoomScale.domain()[0];\n      const domainMax = this.zoomScale.domain()[1];\n      this.debounceDateRangeChanged(domainMin, domainMax);\n    },\n    onResize(entries: ResizeObserverEntry[]) {\n      entries.forEach((entry) => {\n        const outerSize = {\n          height: entry.contentRect.height,\n          width: entry.contentRect.width,\n        };\n        const innerSize = {\n          height: Math.max(\n            0,\n            outerSize.height - this.margin.top - this.margin.bottom\n          ),\n          width: Math.max(\n            0,\n            outerSize.width - this.margin.left - this.margin.right\n          ),\n        };\n\n        this.svg\n          .attr(\"width\", innerSize.width)\n          .attr(\"height\", innerSize.height);\n\n        this.zoomRect\n          .attr(\"width\", innerSize.width)\n          .attr(\"height\", innerSize.height);\n\n        this.zoomBehavior.extent([\n          [0, 0],\n          [innerSize.width, innerSize.height],\n        ]);\n        this.clipRect\n          .attr(\"width\", innerSize.width)\n          .attr(\"height\", innerSize.height);\n        const paddingBottom = 20;\n\n        this.zoomScale.rangeRound([0, innerSize.width]);\n        this.xScale.rangeRound([0, innerSize.width]);\n        this.yScale.rangeRound([0, innerSize.height - paddingBottom]);\n\n        this.scalesChanged();\n      });\n    },\n    scalesChanged() {\n      selectAll(\".track-rect\")\n        .attr(\"width\", this.zoomScale.range()[1])\n        .attr(\"height\", this.yScale.bandwidth);\n\n      selectAll<SVGGElement, string>(\".track-group\").attr(\"transform\", (l) => {\n        const y = this.yScale(l);\n        return y === undefined ? \"translate(0, 0)\" : `translate(0, ${y})`;\n      });\n\n      selectAll<SVGRectElement, IEventBase>(\".event\")\n        .attr(\"width\", (event) => {\n          const xEnd = this.zoomScale(event.end);\n          const xStart = this.zoomScale(event.start);\n          return Math.max(10, xEnd - xStart);\n        })\n        .attr(\"height\", this.yScale.bandwidth)\n        .attr(\n          \"transform\",\n          (event) =>\n            `translate(${this.zoomScale(event.start)}, ${this.yScale(\n              event.label\n            )})`\n        );\n\n      this.xAxis\n        .attr(\"transform\", `translate(0, ${this.yScale.range()[1]})`)\n        .call(this.xAxisDefinition);\n    },\n  },\n  watch: {\n    events() {\n      this.eventsSelection = this.eventsSelection\n        .data(this.events, (e) => e.key)\n        .join(\n          (enter) =>\n            enter\n              .append(\"rect\")\n              .attr(\"class\", \"event\")\n              .attr(\"fill\", \"var(--white)\")\n              .on(\"click.select\", function () {\n                selectAll(\".selected-track\").classed(\"selected-track\", false);\n                select(this).classed(\"selected-track\", true);\n                select(this).attr(\"selected\");\n              })\n              .on(\"click.emit\", (_, event) => this.$emit(\"eventClick\", event)),\n          (update) => {\n            return update;\n          },\n          (exit) => {\n            exit.selectAll(\".selected-track\").classed(\"selected-track\", false);\n            return exit.remove();\n          }\n        );\n\n      this.tracksSelection = this.tracksSelection.data(this.labels).join(\n        (enter) => {\n          const g = enter.append(\"g\").attr(\"class\", \"track-group\");\n          g.append(\"rect\")\n            .attr(\"class\", \"track-rect\")\n            .attr(\"fill\", \"var(--grey2)\");\n          g.append(\"text\")\n            .attr(\"class\", \"track-label\")\n            .attr(\"text-anchor\", \"end\")\n            .attr(\"dominant-baseline\", \"text-before-edge\")\n            .attr(\"transform\", \"translate(-10, 0)\")\n            .attr(\"text-align\", \"right\")\n            .text((label) => label)\n            .style(\"fill\", \"var(--grey3)\")\n            .style(\"font-size\", \"10pt\");\n          return g;\n        },\n        (update) => {\n          return update;\n        },\n        (exit) => {\n          return exit.remove();\n        }\n      );\n\n      this.yScale.domain(this.labels.sort());\n      this.scalesChanged();\n    },\n  },\n  created() {\n    // Read timeline zoom from last visit\n    // const from = localStorage.getItem(\"timeline.zoom.from\");\n    // if (from) {\n    //   this.zoom.from = dayjs(from).toDate();\n    // }\n    this.xScale = scaleTime().domain([this.minDate, this.maxDate]);\n    this.zoomScale = this.xScale;\n    this.yScale = scaleBand().padding(0.6);\n    this.xAxisDefinition = axisBottom(this.xScale);\n  },\n  mounted() {\n    this.svg = select(\".d3\")\n      .append(\"svg\")\n      .attr(\"class\", \"canvas\")\n      .attr(\"transform\", `translate(${this.margin.left}, ${this.margin.top})`)\n      .style(\"overflow\", \"visible\");\n\n    this.xAxis = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"x-axis\")\n      .call(this.xAxisDefinition);\n\n    this.tracksSelection = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"tracks-g\")\n      .selectAll(\".track\");\n\n    this.zoomBehavior = zoom<SVGRectElement, unknown>()\n      .scaleExtent([0.25, 999999]) // This control how much you can unzoom (x0.5) and zoom (x20)\n      .on(\"zoom\", this.zoom);\n\n    this.zoomRect = this.svg\n      .append(\"rect\")\n      .style(\"fill\", \"none\")\n      .style(\"pointer-events\", \"all\")\n      .call(this.zoomBehavior);\n    //.on(\"mousedown.zoom\", null);\n    // TODO\n    // .on(\"touchstart.zoom\", null)\n    // .on(\"touchmove.zoom\", null)\n    // .on(\"touchend.zoom\", null);\n\n    this.clipRect = this.svg\n      .append(\"defs\")\n      .append(\"clipPath\")\n      .attr(\"id\", \"EventsClip\")\n      .append(\"rect\")\n      .attr(\"fill\", \"transparent\");\n\n    this.eventsSelection = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"events-g\")\n      .attr(\"clip-path\", \"url(#EventsClip)\")\n      .selectAll(\".event\");\n\n    this.resizeObserver.observe(this.$refs[\"d3\"] as Element);\n\n    this.$emit(\"dateRangeChanged\", this.minDate, this.maxDate);\n  },\n});\n</script>\n<style>\n/* TODO remove global state? */\n.selected-track {\n  fill: var(--blue);\n}\n</style>\n<style scoped>\n.timeline {\n  background: var(--grey);\n  border-bottom: var(--grey2) solid 1px;\n  display: grid;\n  height: inherit;\n  grid-template-areas:\n    \"d3\"\n    \"info-bar\";\n  grid-template-rows: 1fr auto;\n}\n.d3 {\n  color: var(--grey2);\n  grid-area: d3;\n  height: 100%;\n  opacity: 1;\n  width: inherit;\n}\n.info-bar {\n  display: flex;\n  justify-content: space-between;\n  grid-area: info-bar;\n  margin: 10px 30px 10px 150px;\n}\n</style>\n","<template>\n  <div class=\"date-range\">\n    <el-radio-group v-model=\"duration\" size=\"medium\">\n      <el-radio-button label=\"year\"></el-radio-button>\n      <el-radio-button label=\"month\"></el-radio-button>\n      <el-radio-button label=\"week\" disabled></el-radio-button>\n      <el-radio-button label=\"day\"></el-radio-button>\n    </el-radio-group>\n    <div class=\"date-pager\">\n      <button v-if=\"enabled\" class=\"pager-button\" @click=\"previous()\">\n        &lt;\n      </button>\n      <div class=\"current\">{{ formattedDate }}</div>\n      <button v-if=\"enabled\" class=\"pager-button\" @click=\"next()\">&gt;</button>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport dayjs, { UnitType } from \"dayjs\";\nimport { ElRadioButton, ElRadioGroup } from \"element-plus\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  components: {\n    ElRadioGroup,\n    ElRadioButton,\n  },\n  emits: [\"dateRangeChanged\"],\n  data(): { selectedDate: Date; duration: UnitType } {\n    return {\n      selectedDate: new Date(2021, 6, 15),\n      duration: \"year\",\n    };\n  },\n  props: {\n    enabled: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  watch: {\n    dateRange() {\n      this.$emit(\"dateRangeChanged\", this.dateRange);\n    },\n  },\n  computed: {\n    formattedDate(): string {\n      if (this.duration === \"year\") {\n        return dayjs(this.selectedDate).format(\"YYYY\").toString();\n      } else if (this.duration === \"month\") {\n        return dayjs(this.selectedDate).format(\"YYYY / MM\").toString();\n      } else if (this.duration === \"day\") {\n        return dayjs(this.selectedDate).format(\"YYYY / MM / DD\").toString();\n      }\n      throw `Unsupported unitType ${this.duration}`;\n    },\n    dateRange(): [Date, Date] {\n      return [\n        dayjs(this.selectedDate).startOf(this.duration).toDate(),\n        dayjs(this.selectedDate).endOf(this.duration).toDate(),\n      ];\n    },\n  },\n  methods: {\n    previous() {\n      this.selectedDate = dayjs(this.selectedDate)\n        .subtract(1, this.duration)\n        .toDate();\n    },\n    next() {\n      this.selectedDate = dayjs(this.selectedDate)\n        .add(1, this.duration)\n        .toDate();\n    },\n  },\n});\n</script>\n\n<style scoped>\n.date-range {\n  display: flex;\n  flex-direction: row;\n}\n\n.date-pager {\n  box-sizing: border-box;\n  background: var(--white);\n  color: var(--grey3);\n  font-size: 14px;\n  border: solid 1px #dcdfe6;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n}\n.date-pager:hover {\n  background: var(--grey3);\n  color: var(--white);\n  cursor: default;\n  border: solid 1px var(--grey3);\n}\n\n.pager-button {\n  color: inherit;\n  background: transparent;\n  border: 0;\n  font-family: inherit;\n  font-size: inherit;\n  height: 100%;\n  padding: 0px 9px;\n}\n.pager-button:hover {\n  cursor: pointer;\n}\n</style>\n","\nimport dayjs, { UnitType } from \"dayjs\";\nimport { ElRadioButton, ElRadioGroup } from \"element-plus\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  components: {\n    ElRadioGroup,\n    ElRadioButton,\n  },\n  emits: [\"dateRangeChanged\"],\n  data(): { selectedDate: Date; duration: UnitType } {\n    return {\n      selectedDate: new Date(2021, 6, 15),\n      duration: \"year\",\n    };\n  },\n  props: {\n    enabled: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  watch: {\n    dateRange() {\n      this.$emit(\"dateRangeChanged\", this.dateRange);\n    },\n  },\n  computed: {\n    formattedDate(): string {\n      if (this.duration === \"year\") {\n        return dayjs(this.selectedDate).format(\"YYYY\").toString();\n      } else if (this.duration === \"month\") {\n        return dayjs(this.selectedDate).format(\"YYYY / MM\").toString();\n      } else if (this.duration === \"day\") {\n        return dayjs(this.selectedDate).format(\"YYYY / MM / DD\").toString();\n      }\n      throw `Unsupported unitType ${this.duration}`;\n    },\n    dateRange(): [Date, Date] {\n      return [\n        dayjs(this.selectedDate).startOf(this.duration).toDate(),\n        dayjs(this.selectedDate).endOf(this.duration).toDate(),\n      ];\n    },\n  },\n  methods: {\n    previous() {\n      this.selectedDate = dayjs(this.selectedDate)\n        .subtract(1, this.duration)\n        .toDate();\n    },\n    next() {\n      this.selectedDate = dayjs(this.selectedDate)\n        .add(1, this.duration)\n        .toDate();\n    },\n  },\n});\n","import { render } from \"./DatePager.vue?vue&type=template&id=32d1ccce&scoped=true\"\nimport script from \"./DatePager.vue?vue&type=script&lang=ts\"\nexport * from \"./DatePager.vue?vue&type=script&lang=ts\"\n\nimport \"./DatePager.vue?vue&type=style&index=0&id=32d1ccce&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-32d1ccce\"\n\nexport default script","<template>\n  <div id=\"Tooltip-Container\">\n    <div class=\"single-tooltip\">\n      <span v-for=\"field of content.fields\" :key=\"field.key\">\n        <strong>{{ field.key }}</strong>\n\n        {{ field.value }}</span\n      >\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { TooltipContent } from \".\";\n\nexport default defineComponent({\n  props: {\n    content: {\n      type: TooltipContent,\n    },\n  },\n});\n</script>\n\n<style scoped>\nh1 {\n  font-size: 16pt;\n}\n\nh1,\np {\n  margin: 0;\n  padding: 0;\n}\n\np.subtitle {\n  color: lightgray;\n  font-size: 14pt;\n}\n\n#Tooltip-Container {\n  display: flex;\n  text-transform: uppercase;\n  flex-direction: row;\n  height: 100%;\n  align-items: center;\n  color: var(--blue);\n}\n.single-tooltip span {\n  margin-left: 10px;\n}\n</style>\n","\nimport { defineComponent } from \"vue\";\nimport { TooltipContent } from \".\";\n\nexport default defineComponent({\n  props: {\n    content: {\n      type: TooltipContent,\n    },\n  },\n});\n","import { render } from \"./FlightTooltip.vue?vue&type=template&id=73929900&scoped=true\"\nimport script from \"./FlightTooltip.vue?vue&type=script&lang=ts\"\nexport * from \"./FlightTooltip.vue?vue&type=script&lang=ts\"\n\nimport \"./FlightTooltip.vue?vue&type=style&index=0&id=73929900&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-73929900\"\n\nexport default script","\nimport DateRange from \"./DatePager.vue\";\nimport { defineComponent } from \"vue\";\nimport dayjs from \"dayjs\";\nimport { debounce, uniq } from \"lodash\";\nimport { IEventBase } from \".\";\n\nimport {\n  scaleTime,\n  zoom,\n  axisBottom,\n  select,\n  selectAll,\n  Axis,\n  NumberValue,\n  ScaleBand,\n  scaleBand,\n  Selection,\n  ScaleTime,\n  BaseType,\n  ZoomBehavior,\n  D3ZoomEvent,\n  zoomIdentity,\n} from \"d3\";\n\nimport { TooltipContent } from \".\";\nimport FlightTooltip from \"./FlightTooltip.vue\";\n\nexport default defineComponent({\n  emits: [\"eventClick\", \"dateRangeChanged\"],\n  components: {\n    DateRange,\n    FlightTooltip,\n  },\n  props: {\n    minDate: {\n      type: Date,\n      default: new Date(2021, 0, 1),\n    },\n    maxDate: {\n      type: Date,\n      default: new Date(2021, 11, 31),\n    },\n    events: {\n      type: Array as () => IEventBase[],\n      default: [] as IEventBase[],\n    },\n    tooltipContent: {\n      type: TooltipContent,\n      default: undefined,\n    },\n  },\n  computed: {\n    daysInDomain(): number {\n      return dayjs(this.maxDate).diff(dayjs(this.minDate), \"days\", true);\n    },\n    maxZoomFactor(): number {\n      const minDisplayedDays = 4;\n      return this.daysInDomain / minDisplayedDays;\n    },\n    labels(): string[] {\n      const keyLabels = this.events.map((e) => e.label);\n      return uniq(keyLabels);\n    },\n  },\n  data() {\n    return {\n      debounceDateRangeChanged: debounce((from: Date, to: Date) => {\n        this.$emit(\"dateRangeChanged\", from, to);\n      }, 1000),\n      zoomBehavior: {} as ZoomBehavior<SVGRectElement, unknown>,\n      zoomRect: {} as Selection<SVGRectElement, unknown, HTMLElement, unknown>,\n      margin: { top: 10, right: 30, bottom: 10, left: 150 },\n      xScale: {} as ScaleTime<number, number, never>,\n      zoomScale: {} as ScaleTime<number, number, never>,\n      yScale: {} as ScaleBand<string>,\n      xAxisDefinition: {} as Axis<Date | NumberValue>,\n      xAxis: {} as Selection<SVGGElement, unknown, HTMLElement, unknown>,\n      tracksSelection: {} as Selection<BaseType, string, SVGGElement, unknown>,\n      defaultSelection: [] as number[],\n      svg: {} as Selection<SVGSVGElement, unknown, HTMLElement, unknown>,\n      eventsSelection: {} as Selection<\n        SVGRectElement,\n        IEventBase,\n        SVGGElement,\n        unknown\n      >,\n      clipRect: {} as Selection<SVGRectElement, unknown, HTMLElement, unknown>,\n      resizeObserver: new ResizeObserver(\n        debounce((entries) => {\n          this.onResize(entries);\n        }, 250)\n      ),\n    };\n  },\n  methods: {\n    resetZoom() {\n      this.zoomBehavior.transform(this.zoomRect, zoomIdentity);\n    },\n    setDateRange(range: [Date, Date]) {\n      const from = range[0];\n      const to = range[1];\n\n      this.zoomScale = this.zoomScale.domain([from, to]);\n      this.xAxisDefinition.scale(this.zoomScale);\n      this.scalesChanged();\n\n      const domainMin = this.zoomScale.domain()[0];\n      const domainMax = this.zoomScale.domain()[1];\n      this.debounceDateRangeChanged(domainMin, domainMax);\n    },\n    zoom(event: D3ZoomEvent<SVGRectElement, unknown>) {\n      this.zoomScale = event.transform.rescaleX(this.xScale);\n      this.xAxisDefinition.scale(this.zoomScale);\n      this.scalesChanged();\n\n      const domainMin = this.zoomScale.domain()[0];\n      const domainMax = this.zoomScale.domain()[1];\n      this.debounceDateRangeChanged(domainMin, domainMax);\n    },\n    onResize(entries: ResizeObserverEntry[]) {\n      entries.forEach((entry) => {\n        const outerSize = {\n          height: entry.contentRect.height,\n          width: entry.contentRect.width,\n        };\n        const innerSize = {\n          height: Math.max(\n            0,\n            outerSize.height - this.margin.top - this.margin.bottom\n          ),\n          width: Math.max(\n            0,\n            outerSize.width - this.margin.left - this.margin.right\n          ),\n        };\n\n        this.svg\n          .attr(\"width\", innerSize.width)\n          .attr(\"height\", innerSize.height);\n\n        this.zoomRect\n          .attr(\"width\", innerSize.width)\n          .attr(\"height\", innerSize.height);\n\n        this.zoomBehavior.extent([\n          [0, 0],\n          [innerSize.width, innerSize.height],\n        ]);\n        this.clipRect\n          .attr(\"width\", innerSize.width)\n          .attr(\"height\", innerSize.height);\n        const paddingBottom = 20;\n\n        this.zoomScale.rangeRound([0, innerSize.width]);\n        this.xScale.rangeRound([0, innerSize.width]);\n        this.yScale.rangeRound([0, innerSize.height - paddingBottom]);\n\n        this.scalesChanged();\n      });\n    },\n    scalesChanged() {\n      selectAll(\".track-rect\")\n        .attr(\"width\", this.zoomScale.range()[1])\n        .attr(\"height\", this.yScale.bandwidth);\n\n      selectAll<SVGGElement, string>(\".track-group\").attr(\"transform\", (l) => {\n        const y = this.yScale(l);\n        return y === undefined ? \"translate(0, 0)\" : `translate(0, ${y})`;\n      });\n\n      selectAll<SVGRectElement, IEventBase>(\".event\")\n        .attr(\"width\", (event) => {\n          const xEnd = this.zoomScale(event.end);\n          const xStart = this.zoomScale(event.start);\n          return Math.max(10, xEnd - xStart);\n        })\n        .attr(\"height\", this.yScale.bandwidth)\n        .attr(\n          \"transform\",\n          (event) =>\n            `translate(${this.zoomScale(event.start)}, ${this.yScale(\n              event.label\n            )})`\n        );\n\n      this.xAxis\n        .attr(\"transform\", `translate(0, ${this.yScale.range()[1]})`)\n        .call(this.xAxisDefinition);\n    },\n  },\n  watch: {\n    events() {\n      this.eventsSelection = this.eventsSelection\n        .data(this.events, (e) => e.key)\n        .join(\n          (enter) =>\n            enter\n              .append(\"rect\")\n              .attr(\"class\", \"event\")\n              .attr(\"fill\", \"var(--white)\")\n              .on(\"click.select\", function () {\n                selectAll(\".selected-track\").classed(\"selected-track\", false);\n                select(this).classed(\"selected-track\", true);\n                select(this).attr(\"selected\");\n              })\n              .on(\"click.emit\", (_, event) => this.$emit(\"eventClick\", event)),\n          (update) => {\n            return update;\n          },\n          (exit) => {\n            exit.selectAll(\".selected-track\").classed(\"selected-track\", false);\n            return exit.remove();\n          }\n        );\n\n      this.tracksSelection = this.tracksSelection.data(this.labels).join(\n        (enter) => {\n          const g = enter.append(\"g\").attr(\"class\", \"track-group\");\n          g.append(\"rect\")\n            .attr(\"class\", \"track-rect\")\n            .attr(\"fill\", \"var(--grey2)\");\n          g.append(\"text\")\n            .attr(\"class\", \"track-label\")\n            .attr(\"text-anchor\", \"end\")\n            .attr(\"dominant-baseline\", \"text-before-edge\")\n            .attr(\"transform\", \"translate(-10, 0)\")\n            .attr(\"text-align\", \"right\")\n            .text((label) => label)\n            .style(\"fill\", \"var(--grey3)\")\n            .style(\"font-size\", \"10pt\");\n          return g;\n        },\n        (update) => {\n          return update;\n        },\n        (exit) => {\n          return exit.remove();\n        }\n      );\n\n      this.yScale.domain(this.labels.sort());\n      this.scalesChanged();\n    },\n  },\n  created() {\n    // Read timeline zoom from last visit\n    // const from = localStorage.getItem(\"timeline.zoom.from\");\n    // if (from) {\n    //   this.zoom.from = dayjs(from).toDate();\n    // }\n    this.xScale = scaleTime().domain([this.minDate, this.maxDate]);\n    this.zoomScale = this.xScale;\n    this.yScale = scaleBand().padding(0.6);\n    this.xAxisDefinition = axisBottom(this.xScale);\n  },\n  mounted() {\n    this.svg = select(\".d3\")\n      .append(\"svg\")\n      .attr(\"class\", \"canvas\")\n      .attr(\"transform\", `translate(${this.margin.left}, ${this.margin.top})`)\n      .style(\"overflow\", \"visible\");\n\n    this.xAxis = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"x-axis\")\n      .call(this.xAxisDefinition);\n\n    this.tracksSelection = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"tracks-g\")\n      .selectAll(\".track\");\n\n    this.zoomBehavior = zoom<SVGRectElement, unknown>()\n      .scaleExtent([0.25, 999999]) // This control how much you can unzoom (x0.5) and zoom (x20)\n      .on(\"zoom\", this.zoom);\n\n    this.zoomRect = this.svg\n      .append(\"rect\")\n      .style(\"fill\", \"none\")\n      .style(\"pointer-events\", \"all\")\n      .call(this.zoomBehavior);\n    //.on(\"mousedown.zoom\", null);\n    // TODO\n    // .on(\"touchstart.zoom\", null)\n    // .on(\"touchmove.zoom\", null)\n    // .on(\"touchend.zoom\", null);\n\n    this.clipRect = this.svg\n      .append(\"defs\")\n      .append(\"clipPath\")\n      .attr(\"id\", \"EventsClip\")\n      .append(\"rect\")\n      .attr(\"fill\", \"transparent\");\n\n    this.eventsSelection = this.svg\n      .append(\"g\")\n      .attr(\"class\", \"events-g\")\n      .attr(\"clip-path\", \"url(#EventsClip)\")\n      .selectAll(\".event\");\n\n    this.resizeObserver.observe(this.$refs[\"d3\"] as Element);\n\n    this.$emit(\"dateRangeChanged\", this.minDate, this.maxDate);\n  },\n});\n","import { render } from \"./Timeline.vue?vue&type=template&id=48e5e73c&scoped=true\"\nimport script from \"./Timeline.vue?vue&type=script&lang=ts\"\nexport * from \"./Timeline.vue?vue&type=script&lang=ts\"\n\nimport \"./Timeline.vue?vue&type=style&index=0&id=48e5e73c&lang=css\"\nimport \"./Timeline.vue?vue&type=style&index=1&id=48e5e73c&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-48e5e73c\"\n\nexport default script","\nimport dayjs from \"dayjs\";\nimport { defineComponent } from \"vue\";\nimport { mapState, mapActions } from \"vuex\";\nimport { Feature, LineString } from \"geojson\";\n\nimport { TooltipContent, IEvent } from \".\";\nimport LeafletMap from \"./Leaflet.vue\";\nimport Timeline from \"./Timeline.vue\";\n\nimport { Flight } from \"@/models/Flight\";\n\nexport default defineComponent({\n  data(): {\n    events: IEvent<Flight>[];\n    tooltipContent: TooltipContent | undefined;\n    selectedFlightId: string | undefined;\n  } {\n    return {\n      events: [],\n      tooltipContent: undefined,\n      selectedFlightId: undefined,\n    };\n  },\n  methods: {\n    async dateRangeChanged(from: Date, to: Date) {\n      await this.getFlights({ from, to });\n    },\n    highlightFlight(event: IEvent<Flight>) {\n      this.selectedFlightId = event.key;\n      const flightEnd = event.data.to;\n      const flightStart = event.data.from;\n      const totalMinutes = dayjs(flightEnd).diff(flightStart, \"minutes\");\n      const totalHours = Math.floor(totalMinutes / 60);\n      const minutes = totalMinutes % 60;\n      this.tooltipContent = new TooltipContent([\n        {\n          key: \"DATE\",\n          value: dayjs(event.data.from).format(\"YYYY-MM-DD\"),\n        },\n        {\n          key: \"TIME\",\n          value: dayjs(event.data.from).format(\"HH:mm\"),\n        },\n        {\n          key: \"DURATION\",\n          value: `${totalHours.toString()}h ${minutes}m`,\n        },\n        {\n          key: \"TYPE\",\n          value: event.data.aircraft,\n        },\n      ]);\n    },\n    ...mapActions([\"getFlights\"]),\n  },\n  computed: {\n    ...mapState([\"flights\"]),\n  },\n  watch: {\n    async flights(flights: Feature<LineString, Flight>[]) {\n      this.events = flights.map((f) => {\n        return {\n          data: f.properties,\n          label: f.properties.aircraft,\n          key: f.id as string,\n          start: dayjs(f.properties.from).toDate(),\n          end: dayjs(f.properties.to).toDate(),\n        };\n      });\n    },\n  },\n  components: {\n    LeafletMap,\n    Timeline,\n  },\n});\n","import { render } from \"./TheTimeline.vue?vue&type=template&id=3050e800&scoped=true\"\nimport script from \"./TheTimeline.vue?vue&type=script&lang=ts\"\nexport * from \"./TheTimeline.vue?vue&type=script&lang=ts\"\n\nimport \"./TheTimeline.vue?vue&type=style&index=0&id=3050e800&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-3050e800\"\n\nexport default script","<template>\n  <div class=\"parent\">\n    <div class=\"child\">\n      <h1>Hello! You Need Data To Use This App</h1>\n\n      <p>\n        Sorry, we currently don't have a license to publicly redistribute any of\n        our test data.\n      </p>\n\n      <p>\n        Please contact one of the project maintainers to request a sample data\n        set.\n      </p>\n\n      <label>\n        <input\n          type=\"file\"\n          ref=\"file\"\n          @change=\"loadData($event.target.files[0])\"\n          :disabled=\"isLoading\"\n        />\n\n        <!--\n          Tabler Icon \"loader\"\n          Copyright (c) 2020 Paweł Kuna\n          Source: https://tablericons.com/\n          License: MIT\n        -->\n        <svg\n          v-if=\"isLoading\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"icon icon-tabler icon-tabler-loader\"\n          width=\"44\"\n          height=\"44\"\n          viewBox=\"0 0 24 24\"\n          stroke-width=\"1.5\"\n          stroke=\"#2c3e50\"\n          fill=\"none\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n          <line x1=\"12\" y1=\"6\" x2=\"12\" y2=\"3\" />\n          <line x1=\"16.25\" y1=\"7.75\" x2=\"18.4\" y2=\"5.6\" />\n          <line x1=\"18\" y1=\"12\" x2=\"21\" y2=\"12\" />\n          <line x1=\"16.25\" y1=\"16.25\" x2=\"18.4\" y2=\"18.4\" />\n          <line x1=\"12\" y1=\"18\" x2=\"12\" y2=\"21\" />\n          <line x1=\"7.75\" y1=\"16.25\" x2=\"5.6\" y2=\"18.4\" />\n          <line x1=\"6\" y1=\"12\" x2=\"3\" y2=\"12\" />\n          <line x1=\"7.75\" y1=\"7.75\" x2=\"5.6\" y2=\"5.6\" />\n        </svg>\n\n        <!--\n          Tabler Icon \"upload\"\n          Copyright (c) 2020 Paweł Kuna\n          Source: https://tablericons.com/\n          License: MIT\n        -->\n        <svg\n          v-else\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"icon icon-tabler icon-tabler-upload\"\n          width=\"44\"\n          height=\"44\"\n          viewBox=\"0 0 24 24\"\n          stroke-width=\"1.5\"\n          stroke=\"#2c3e50\"\n          fill=\"none\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n        >\n          <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n          <path d=\"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2\" />\n          <polyline points=\"7 9 12 4 17 9\" />\n          <line x1=\"12\" y1=\"4\" x2=\"12\" y2=\"16\" />\n        </svg>\n\n        <p class=\"status-text\">\n          {{ status }}\n        </p>\n      </label>\n\n      <p>\n        If you want to provide your own data,\n        <a href=\"https://github.com/schnerring/seabats/blob/main/README.md\"\n          >read more about the expected data format</a\n        >.\n      </p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { loadAsync } from \"jszip\";\nimport { FeatureCollection } from \"geojson\";\n\nimport { addGeoJSON } from \"@/shared/DataService\";\n\nexport default defineComponent({\n  data() {\n    return {\n      isLoading: false,\n    };\n  },\n  computed: {\n    status(): string {\n      return this.isLoading\n        ? \"Loading ...\"\n        : \"Click here to select a data set from the local file system\";\n    },\n  },\n  methods: {\n    async loadData(zip: File) {\n      this.isLoading = true;\n      const buffer = await zip.arrayBuffer();\n      const unzipped = await loadAsync(buffer);\n      try {\n        for (const filePath in unzipped.files) {\n          const file = unzipped.file(filePath);\n\n          if (!file) throw `Error unzipping file: ${filePath}`;\n\n          const content = await file.async(\"string\");\n          const geoJSON: FeatureCollection = JSON.parse(content);\n          await addGeoJSON(geoJSON);\n        }\n      } catch (error) {\n        // TODO show error to user\n        console.error(error);\n      } finally {\n        this.isLoading = false;\n      }\n\n      this.$router.push(\"/\");\n    },\n  },\n});\n</script>\n\n<style scoped>\n.parent {\n  height: 100%;\n  text-align: center;\n}\n.parent,\n.child {\n  display: grid;\n  place-items: center;\n}\n.status-text {\n  font-size: 9pt;\n  margin-top: 0.2rem;\n}\ninput[type=\"file\"] {\n  display: none;\n}\nlabel {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  margin: 40px 0;\n}\nlabel:hover {\n  color: var(--blue);\n  cursor: pointer;\n}\nlabel:hover svg {\n  stroke: var(--blue);\n  transform: translateY(-5px);\n}\nsvg {\n  transition: transform 0.4s ease-in-out;\n}\nsvg.icon-tabler-loader {\n  animation: spin 1s linear infinite;\n}\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","import PouchDB from \"pouchdb\";\nimport find from \"pouchdb-find\";\nimport axios from \"axios\";\nimport marked from \"marked\";\nimport { Feature, FeatureCollection } from \"geojson\";\n\nconst db = new PouchDB<Feature>(\"geoJSON\");\nPouchDB.plugin(find);\n\nexport async function addGeoJSON(\n  featureCollection: FeatureCollection\n): Promise<void> {\n  await db.bulkDocs(featureCollection.features);\n  await db.createIndex({\n    index: {\n      fields: [\"id\", \"properties.from\", \"properties.to\", \"properties.type\"],\n    },\n  });\n}\n\nexport async function getZones(): Promise<Feature[]> {\n  const found = await db.find({\n    selector: {\n      $or: [\n        {\n          \"properties.type\": \"sar\",\n        },\n        {\n          \"properties.type\": \"12nm\",\n        },\n        {\n          \"properties.type\": \"24nm\",\n        },\n      ],\n    },\n  });\n  return found.docs;\n}\n\nexport async function getFlights(from: Date, to: Date): Promise<Feature[]> {\n  const found = await db.find({\n    selector: {\n      \"properties.type\": \"flight\",\n      \"properties.from\": { $gte: from, $lte: to },\n      // TODO properties.to\n    },\n  });\n  return found.docs;\n}\n\nexport async function getFlightsByIds(ids: string[]): Promise<Feature[]> {\n  const found = await db.find({\n    selector: {\n      id: { $in: ids },\n    },\n  });\n  return found.docs;\n}\n\nexport async function dataExists(): Promise<boolean> {\n  return (await db.info()).doc_count > 0;\n}\n\nexport async function getInfoText(): Promise<string> {\n  const response = await axios.get<string>(\"info-text.md\");\n  return marked(response.data);\n}\n","\nimport { defineComponent } from \"vue\";\nimport { loadAsync } from \"jszip\";\nimport { FeatureCollection } from \"geojson\";\n\nimport { addGeoJSON } from \"@/shared/DataService\";\n\nexport default defineComponent({\n  data() {\n    return {\n      isLoading: false,\n    };\n  },\n  computed: {\n    status(): string {\n      return this.isLoading\n        ? \"Loading ...\"\n        : \"Click here to select a data set from the local file system\";\n    },\n  },\n  methods: {\n    async loadData(zip: File) {\n      this.isLoading = true;\n      const buffer = await zip.arrayBuffer();\n      const unzipped = await loadAsync(buffer);\n      try {\n        for (const filePath in unzipped.files) {\n          const file = unzipped.file(filePath);\n\n          if (!file) throw `Error unzipping file: ${filePath}`;\n\n          const content = await file.async(\"string\");\n          const geoJSON: FeatureCollection = JSON.parse(content);\n          await addGeoJSON(geoJSON);\n        }\n      } catch (error) {\n        // TODO show error to user\n        console.error(error);\n      } finally {\n        this.isLoading = false;\n      }\n\n      this.$router.push(\"/\");\n    },\n  },\n});\n","import { render } from \"./Setup.vue?vue&type=template&id=336f499a&scoped=true\"\nimport script from \"./Setup.vue?vue&type=script&lang=ts\"\nexport * from \"./Setup.vue?vue&type=script&lang=ts\"\n\nimport \"./Setup.vue?vue&type=style&index=0&id=336f499a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-336f499a\"\n\nexport default script","<template>\n  <div class=\"info-map\">\n    <div class=\"info\" v-html=\"infoText\"></div>\n    <info-map :flights=\"flights\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { mapState, mapActions } from \"vuex\";\n\nimport InfoMap from \"./Leaflet.vue\";\nimport { Feature } from \"geojson\";\n\nimport { getFlightsByIds } from \"@/shared/DataService\";\n\nexport default defineComponent({\n  computed: {\n    ...mapState([\"infoText\"]),\n  },\n  methods: {\n    ...mapActions([\"getInfoText\"]),\n  },\n  components: {\n    InfoMap,\n  },\n  data(): { flights: Feature[] } {\n    return {\n      flights: [],\n    };\n  },\n  async mounted() {\n    await this.getInfoText();\n    const buttons = document.getElementsByClassName(\"data-link\");\n    for (const button of buttons) {\n      const flightIds = button.getAttribute(\"data\")?.split(\",\");\n      if (!flightIds) throw \"data-link requires data attribute\";\n      button.addEventListener(\"click\", async () => {\n        this.flights = await getFlightsByIds(flightIds);\n      });\n    }\n  },\n});\n</script>\n<style>\n.data-link {\n  border: none;\n  background: none;\n  padding: 0;\n  color: blue;\n  cursor: pointer;\n  font-size: inherit;\n}\n.data-link::before {\n  content: \"✈\";\n}\n</style>\n<style scoped>\n.opensky-attribution {\n  font-style: italic;\n}\n.info-map {\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n}\n.info {\n  width: 100%;\n  padding: 5px 30px;\n  box-sizing: border-box;\n  overflow-y: scroll;\n}\ndiv#leaflet {\n  height: 100%;\n  width: 50vw;\n}\n</style>\n","<template>\n  <div class=\"leaflet-container\">\n    <div id=\"leaflet\"></div>\n    <div class=\"tooltip-list\">\n      <tooltip\n        v-for=\"content of tooltipContents\"\n        :key=\"content\"\n        :from=\"content.from\"\n        :to=\"content.to\"\n        :aircraftName=\"content.aircraftName\"\n      />\n    </div>\n    <div class=\"legend\">\n      <legend-item\n        v-for=\"item of legendItems\"\n        :key=\"item.label\"\n        :color=\"item.color\"\n        :label=\"item.label\"\n        :attribution=\"item.attribution\"\n        :description=\"item.description\"\n      ></legend-item>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { mapActions, mapState } from \"vuex\";\nimport { Feature, LineString } from \"geojson\";\nimport {\n  Map as LeafletMap,\n  GeoJSON,\n  Canvas,\n  FeatureGroup,\n  geoJSON,\n} from \"leaflet\";\nimport Tooltip from \"./Tooltip.vue\";\nimport LegendItem from \"@/components/LegendItem.vue\";\nimport { Flight } from \"@/models/Flight\";\nimport dayjs from \"dayjs\";\n\nimport {\n  initialCenter,\n  initialZoom,\n  lineStyleHighlighted,\n  tileLayer,\n  zoneStyle,\n} from \"@/shared/LeafletConfig\";\n\nexport default defineComponent({\n  components: {\n    LegendItem,\n    Tooltip,\n  },\n  computed: {\n    ...mapState([\"zones\"]),\n  },\n  methods: {\n    ...mapActions([\"getZones\"]),\n  },\n\n  data(): {\n    map: LeafletMap | undefined;\n    data: FeatureGroup | undefined;\n    legendItems: {\n      color: string;\n      label: string;\n      attribution: string;\n      description: string;\n    }[];\n    tooltipContents: {\n      from: Date;\n      to: Date;\n      aircraftName: string;\n    }[];\n  } {\n    return {\n      map: undefined,\n      data: undefined,\n      legendItems: [],\n      tooltipContents: [],\n    };\n  },\n  props: {\n    flights: {\n      default: () => [] as Feature<LineString, Flight>[],\n      type: Array,\n    },\n  },\n  watch: {\n    async flights(flights: Feature<LineString, Flight>[]) {\n      if (this.data) {\n        this.data.remove();\n      }\n      if (this.tooltipContents.length > 0) {\n        this.tooltipContents = [];\n      }\n      const data = new FeatureGroup<GeoJSON>();\n      for (const flight of flights) {\n        this.tooltipContents.push({\n          aircraftName: flight.properties.aircraft,\n          from: dayjs(flight.properties.from).toDate(),\n          to: dayjs(flight.properties.to).toDate(),\n        });\n        data.addLayer(\n          geoJSON(flight, {\n            style: lineStyleHighlighted,\n          })\n        );\n      }\n      // Render lines in Leaflet\n      this.map?.addLayer(data);\n      this.map?.fitBounds(data.getBounds().pad(0.2));\n\n      this.data = data;\n    },\n    zones(zones: Feature[]) {\n      // TODO fix code duplication\n      this.legendItems = zones\n        .filter((z) => z.properties?.type === \"sar\")\n        .map((z) => {\n          return {\n            color: z.properties?.color,\n            label: z.properties?.label,\n            attribution: z.properties?.attribution,\n            description: z.properties?.description,\n          };\n        });\n      for (const zone of zones) {\n        this.map?.addLayer(\n          geoJSON(zone, {\n            style: zoneStyle(zone.properties?.type, zone.properties?.color),\n          })\n        );\n      }\n    },\n  },\n  async mounted() {\n    this.map = new LeafletMap(\"leaflet\", {\n      renderer: new Canvas(),\n      zoomControl: false,\n      attributionControl: false,\n      keyboard: false,\n      dragging: false,\n      scrollWheelZoom: false,\n      doubleClickZoom: false,\n    });\n\n    this.map.setView(initialCenter, initialZoom);\n\n    this.map.addLayer(tileLayer());\n\n    await this.getZones();\n  },\n  beforeUnmount() {\n    this.map?.remove();\n  },\n});\n</script>\n\n<style scoped>\n.tooltip-list {\n  position: absolute;\n  left: 15px;\n  color: var(--white);\n  z-index: 500;\n  top: 15px;\n  font-family: monospace;\n}\n.legend {\n  bottom: 15px;\n  color: var(--white);\n  position: absolute;\n  left: 15px;\n  z-index: 500;\n}\n.leaflet-container {\n  position: relative;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","<template>\n  <div class=\"single-tooltip\">\n    <span\n      >from {{ formatDate(from) }} to {{ formatDate(to) }}: {{ aircraftName }}\n    </span>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport dayjs from \"dayjs\";\n\nexport default defineComponent({\n  methods: {\n    formatDate(date: Date) {\n      return dayjs(date).format(this.dayjsFormat);\n    },\n  },\n  props: {\n    from: {\n      type: Date,\n    },\n    to: {\n      type: Date,\n    },\n    aircraftName: {\n      type: String,\n    },\n    dayjsFormat: {\n      type: String,\n      default: \"YY/MM/DD HH:mm\",\n    },\n  },\n});\n</script>\n\n<style scoped></style>\n","\nimport { defineComponent } from \"vue\";\nimport dayjs from \"dayjs\";\n\nexport default defineComponent({\n  methods: {\n    formatDate(date: Date) {\n      return dayjs(date).format(this.dayjsFormat);\n    },\n  },\n  props: {\n    from: {\n      type: Date,\n    },\n    to: {\n      type: Date,\n    },\n    aircraftName: {\n      type: String,\n    },\n    dayjsFormat: {\n      type: String,\n      default: \"YY/MM/DD HH:mm\",\n    },\n  },\n});\n","import { render } from \"./Tooltip.vue?vue&type=template&id=fa7adce2\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=ts\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\nimport { defineComponent } from \"vue\";\nimport { mapActions, mapState } from \"vuex\";\nimport { Feature, LineString } from \"geojson\";\nimport {\n  Map as LeafletMap,\n  GeoJSON,\n  Canvas,\n  FeatureGroup,\n  geoJSON,\n} from \"leaflet\";\nimport Tooltip from \"./Tooltip.vue\";\nimport LegendItem from \"@/components/LegendItem.vue\";\nimport { Flight } from \"@/models/Flight\";\nimport dayjs from \"dayjs\";\n\nimport {\n  initialCenter,\n  initialZoom,\n  lineStyleHighlighted,\n  tileLayer,\n  zoneStyle,\n} from \"@/shared/LeafletConfig\";\n\nexport default defineComponent({\n  components: {\n    LegendItem,\n    Tooltip,\n  },\n  computed: {\n    ...mapState([\"zones\"]),\n  },\n  methods: {\n    ...mapActions([\"getZones\"]),\n  },\n\n  data(): {\n    map: LeafletMap | undefined;\n    data: FeatureGroup | undefined;\n    legendItems: {\n      color: string;\n      label: string;\n      attribution: string;\n      description: string;\n    }[];\n    tooltipContents: {\n      from: Date;\n      to: Date;\n      aircraftName: string;\n    }[];\n  } {\n    return {\n      map: undefined,\n      data: undefined,\n      legendItems: [],\n      tooltipContents: [],\n    };\n  },\n  props: {\n    flights: {\n      default: () => [] as Feature<LineString, Flight>[],\n      type: Array,\n    },\n  },\n  watch: {\n    async flights(flights: Feature<LineString, Flight>[]) {\n      if (this.data) {\n        this.data.remove();\n      }\n      if (this.tooltipContents.length > 0) {\n        this.tooltipContents = [];\n      }\n      const data = new FeatureGroup<GeoJSON>();\n      for (const flight of flights) {\n        this.tooltipContents.push({\n          aircraftName: flight.properties.aircraft,\n          from: dayjs(flight.properties.from).toDate(),\n          to: dayjs(flight.properties.to).toDate(),\n        });\n        data.addLayer(\n          geoJSON(flight, {\n            style: lineStyleHighlighted,\n          })\n        );\n      }\n      // Render lines in Leaflet\n      this.map?.addLayer(data);\n      this.map?.fitBounds(data.getBounds().pad(0.2));\n\n      this.data = data;\n    },\n    zones(zones: Feature[]) {\n      // TODO fix code duplication\n      this.legendItems = zones\n        .filter((z) => z.properties?.type === \"sar\")\n        .map((z) => {\n          return {\n            color: z.properties?.color,\n            label: z.properties?.label,\n            attribution: z.properties?.attribution,\n            description: z.properties?.description,\n          };\n        });\n      for (const zone of zones) {\n        this.map?.addLayer(\n          geoJSON(zone, {\n            style: zoneStyle(zone.properties?.type, zone.properties?.color),\n          })\n        );\n      }\n    },\n  },\n  async mounted() {\n    this.map = new LeafletMap(\"leaflet\", {\n      renderer: new Canvas(),\n      zoomControl: false,\n      attributionControl: false,\n      keyboard: false,\n      dragging: false,\n      scrollWheelZoom: false,\n      doubleClickZoom: false,\n    });\n\n    this.map.setView(initialCenter, initialZoom);\n\n    this.map.addLayer(tileLayer());\n\n    await this.getZones();\n  },\n  beforeUnmount() {\n    this.map?.remove();\n  },\n});\n","import { render } from \"./Leaflet.vue?vue&type=template&id=41d95c29&scoped=true\"\nimport script from \"./Leaflet.vue?vue&type=script&lang=ts\"\nexport * from \"./Leaflet.vue?vue&type=script&lang=ts\"\n\nimport \"./Leaflet.vue?vue&type=style&index=0&id=41d95c29&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-41d95c29\"\n\nexport default script","\nimport { defineComponent } from \"vue\";\nimport { mapState, mapActions } from \"vuex\";\n\nimport InfoMap from \"./Leaflet.vue\";\nimport { Feature } from \"geojson\";\n\nimport { getFlightsByIds } from \"@/shared/DataService\";\n\nexport default defineComponent({\n  computed: {\n    ...mapState([\"infoText\"]),\n  },\n  methods: {\n    ...mapActions([\"getInfoText\"]),\n  },\n  components: {\n    InfoMap,\n  },\n  data(): { flights: Feature[] } {\n    return {\n      flights: [],\n    };\n  },\n  async mounted() {\n    await this.getInfoText();\n    const buttons = document.getElementsByClassName(\"data-link\");\n    for (const button of buttons) {\n      const flightIds = button.getAttribute(\"data\")?.split(\",\");\n      if (!flightIds) throw \"data-link requires data attribute\";\n      button.addEventListener(\"click\", async () => {\n        this.flights = await getFlightsByIds(flightIds);\n      });\n    }\n  },\n});\n","import { render } from \"./TheStories.vue?vue&type=template&id=9e6b951c&scoped=true\"\nimport script from \"./TheStories.vue?vue&type=script&lang=ts\"\nexport * from \"./TheStories.vue?vue&type=script&lang=ts\"\n\nimport \"./TheStories.vue?vue&type=style&index=0&id=9e6b951c&lang=css\"\nimport \"./TheStories.vue?vue&type=style&index=1&id=9e6b951c&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-9e6b951c\"\n\nexport default script","export const CHECK_IF_DATA_EXSISTS = \"checkIfDataExists\";\nexport const GET_FLIGHTS = \"getFlights\";\nexport const GET_INFO_TEXT = \"getInfoText\";\nexport const GET_ZONES = \"getZones\";\n","import { State } from \"@vue/runtime-core\";\nimport { createStore } from \"vuex\";\nimport {\n  CHECK_IF_DATA_EXSISTS,\n  GET_FLIGHTS,\n  GET_INFO_TEXT,\n  GET_ZONES,\n} from \"./types\";\nimport {\n  dataExists,\n  getFlights,\n  getZones,\n  getInfoText,\n} from \"@/shared/DataService\";\n\nexport const store = createStore<State>({\n  state: {\n    dataExists: false,\n    flights: [],\n    zones: [],\n    infoText: \"\",\n  },\n  mutations: {\n    [CHECK_IF_DATA_EXSISTS](state, dataExists) {\n      state.dataExists = dataExists;\n    },\n    [GET_FLIGHTS](state, flights) {\n      state.flights = flights;\n    },\n    [GET_ZONES](state, zones) {\n      state.zones = zones;\n    },\n    [GET_INFO_TEXT](state, infoText) {\n      state.infoText = infoText;\n    },\n  },\n  actions: {\n    async getInfoText({ commit }) {\n      const flightInfos = await getInfoText();\n      commit(GET_INFO_TEXT, flightInfos);\n    },\n    async getFlights({ commit }, payload) {\n      const flights = await getFlights(payload.from, payload.to);\n      commit(GET_FLIGHTS, flights);\n    },\n    async getZones({ commit }) {\n      const zones = await getZones();\n      commit(GET_ZONES, zones);\n    },\n    async checkIfDataExists({ commit }) {\n      commit(CHECK_IF_DATA_EXSISTS, await dataExists());\n    },\n  },\n  modules: {},\n});\n","import { createRouter, createWebHistory, RouteRecordRaw } from \"vue-router\";\nimport TheTimeline from \"@/views/timeline/TheTimeline.vue\";\nimport Setup from \"@/views/Setup.vue\";\nimport TheStories from \"@/views/stories/TheStories.vue\";\nimport { store } from \"../store/index\";\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: \"/setup\",\n    name: \"Setup\",\n    component: Setup,\n  },\n  {\n    path: \"/\",\n    alias: \"/timeline\",\n    name: \"Timeline\",\n    component: TheTimeline,\n    meta: {\n      requireData: true,\n    },\n  },\n  {\n    path: \"/stories\",\n    name: \"Stories\",\n    component: TheStories,\n    meta: {\n      requireData: true,\n    },\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n});\n\nrouter.beforeEach(async (to, from, next) => {\n  if (!store.state.dataExists) {\n    await store.dispatch(\"checkIfDataExists\");\n  }\n\n  if (\n    to.matched.some((record) => record.meta.requireData) &&\n    !store.state.dataExists\n  ) {\n    next(\"/setup\");\n  } else if (\n    to.matched.some((record) => record.name === \"Setup\") &&\n    store.state.dataExists\n  ) {\n    next(from);\n  } else next();\n});\n\nexport default router;\n","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport { store } from \"./store\";\n\n// Element Plus\nimport { ElIcon, ElNotification } from \"element-plus\";\nconst components = [ElIcon];\nconst plugins = [ElNotification];\n\nimport \"@/assets/element-variables.scss\";\nimport \"leaflet/dist/leaflet.css\";\n\nconst app = createApp(App).use(store).use(router);\n\ncomponents.forEach((component) => app.use(component));\nplugins.forEach((plugin) => app.use(plugin));\n\napp.mount(\"#app\");\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Timeline.vue?vue&type=style&index=1&id=48e5e73c&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Leaflet.vue?vue&type=style&index=0&id=208051ef&scoped=true&lang=css\""],"sourceRoot":""}